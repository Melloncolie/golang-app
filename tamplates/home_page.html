<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Список задач</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        form { max-width: 400px; margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; }
        input, textarea { width: 100%; padding: 8px; margin-bottom: 10px; }
        button { padding: 16px 20px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
        .delete-btn { background-color: #f44336; color: white; border: none; cursor: pointer; }
        .action-buttons { display: flex; gap: 8px; align-items: center; }
        h2 { margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>Добрый день</h1>
    <h2>Список задач</h2>
    <table>
        <tr>
            <th>Название</th>
            <th>Описание</th>
            <th>Время начала</th>
            <th>Выполнено</th>
            <th>Время завершения</th>
            <th>Действие</th>
        </tr>
        {{range .}}
        <tr>
            <td>{{.Name}}</td>
            <td>{{.Description}}</td>
            <td>{{.Time_start.Format "2006-01-02 15:04:05"}}</td>
            <td>{{if .Isdone}}Да{{else}}Нет{{end}}</td>
            <td>{{if .Isdone}}{{.Time_end.Format "2006-01-02 15:04:05"}}{{else}}-{{end}}</td>
            <td>
                <div class="action-buttons">
                {{if not .Isdone}}
                    <form action="/taskdone" method="POST" onsubmit="return confirm('Отметить задачу выполненой?');">
                    <input type="hidden" name="taskName" value="{{.Name}}">
                    <button type="submit"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square-fill" viewBox="0 0 16 16">
                    <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm10.03 4.97a.75.75 0 0 1 .011 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.75.75 0 0 1 1.08-.022z"></path>
                    </svg></button>
                </form>
                {{end}}
                <form action="/deletetask" method="POST" onsubmit="return confirm('Удалить задачу?');">
                    <input type="hidden" name="taskName" value="{{.Name}}">
                    <button type="submit" class="delete-btn"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">
                    <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"></path>
                    </svg></button>
                </form></td>
                </div>
        </tr>
        {{else}}
        <tr>
            <td colspan="6">Задачи отсутствуют</td>
        </tr>
        {{end}}
    </table>
    <h2>Добавить новую задачу</h2>
    <form action="/addtask" method="POST">
        <label for="taskName">Название задачи:</label>
        <input type="text" id="taskName" name="taskName" placeholder="Введите название задачи" required>

        <label for="description">Описание:</label>
        <textarea id="description" name="description" placeholder="Введите описание задачи" required></textarea>
        <button type="submit">Добавить задачу</button>
    </form>
</body>
</html>